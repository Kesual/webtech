<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WebTec UE04 - hopps</title>
    <style type="text/css">
        table {
            background-color: gray;
        }

        tr, td{
            height: 40px;
            width: 35px;
            background-color: white;
        }
    </style>
    <script type='text/javascript'>
        "use strict";
        window.addEventListener("load", function () {

            let button1, button2, zeilen, spalten, div1, div2, valueZ, valueS;

            addInputField();
            addButtons();

            div1 = document.getElementById("div1");
            div2 = document.getElementById("div2");

            zeilen = document.getElementById("zeilen");
            spalten = document.getElementById("spalten");

            button1 = document.getElementById("button1");
            button1.addEventListener("click", function () {

                if (button1.innerText === "langsam"){
                    button1.innerText = "schnell";
                } else {
                    button1.innerText = "langsam";
                }

            });

            button2 = document.getElementById("button2");
            button2.addEventListener("click", function () {

                zeilen = zeilen.value;
                spalten = spalten.value;

                while(div1.firstChild){ div1.removeChild(div1.firstChild); }
                while(div2.firstChild){ div2.removeChild(div2.firstChild); }

                let game = new Field("div2", zeilen, spalten);
                game.setField();

                setStartButton();

                let startB = document.getElementById("button3");
                startB.addEventListener("click", function (){

                    let hopps = new HoppsButtonGame(game);
                    hopps.start();

                }); // Start-Button

            }); // OK-Button
            
        }); // window-onload
        
        function addInputField() {

            let div, textField, input, textField2, input2, startDiv;

            div = document.createElement("DIV");
            textField = document.createElement("SPAN");
            input = document.createElement("INPUT");
            textField2 = document.createElement("SPAN");
            input2 = document.createElement("INPUT");

            div.style.display = "flex";
            div.style.alignItems = "center";
            div.style.justifyContent = "center";
            div.style.visibility = "visible";
            div.setAttribute("id", "div1");

            document.body.appendChild(div);

            startDiv = document.getElementById("div1");

            textField.innerText = "Anzahl Zeilen:";
            textField.style.marginRight = "5px";

            input.style.marginRight = "20px";
            input.setAttribute("type", "number");
            input.setAttribute("min", "3");
            input.setAttribute("max", "15");
            input.setAttribute("value", "3");
            input.setAttribute("id", "zeilen");

            textField2.innerText = "Anzahl Spalten:";
            textField2.style.marginRight = "5px";

            input2.style.marginRight = "20px";
            input2.setAttribute("type", "number");
            input2.setAttribute("min", "3");
            input2.setAttribute("max", "15");
            input2.setAttribute("value", "3");
            input2.setAttribute("id", "spalten");

            startDiv.appendChild(textField);
            startDiv.appendChild(input);
            startDiv.appendChild(textField2);
            startDiv.appendChild(input2);

        }

        function addButtons() {

            let div, startDiv, button1, button2;

            div = document.createElement("DIV");
            button1 = document.createElement("BUTTON");
            button2 = document.createElement("BUTTON");

            div.style.display = "flex";
            div.style.alignItems = "center";
            div.style.justifyContent = "center";
            div.style.marginTop = "30px";
            div.style.visibility = "visible";
            div.setAttribute("id", "div2");

            document.body.appendChild(div);

            startDiv = document.getElementById("div2");

            button1.innerText = "langsam";
            button1.setAttribute("id", "button1");

            button2.innerText = "OK";
            button2.setAttribute("id", "button2");

            startDiv.appendChild(button1);
            startDiv.appendChild(button2);
        }

        function setStartButton() {

            let div1, start;

            start = document.createElement("BUTTON");

            div1 = document.getElementById("div1");

            start.innerText = "Start";
            start.setAttribute("id", "button3");

            div1.appendChild(start);

        }

        function Field(div, zeilen, spalten) {
            
            this.mainDiv = document.getElementById(div);
            this.zeilen = zeilen;
            this.spalten = spalten;

            this.setField = function () {
                let table, tBody, tableElem, numb = 0, currTable;
               
                table = document.createElement("TABLE");
                table.setAttribute("id", "table");
                this.mainDiv.appendChild(table);
                
                table = document.getElementById("table");
                tBody = document.createElement("TBODY");
                tBody.setAttribute("id", "tBody");
                table.appendChild(tBody);
                
                tBody = document.getElementById("tBody");
                
                for (let i = 0; i < this.zeilen; i++){
                    
                    let tabelleZeile = document.createElement("TR");
                    tabelleZeile.setAttribute("id", "zeile" + numb);
                    tBody.appendChild(tabelleZeile);
                    
                    for (let j = 0; j < this.spalten; j++){
                        
                        currTable = document.getElementById("zeile" + numb);
                        let tabelleSpalte = document.createElement("TD");
                        tabelleSpalte.setAttribute("name", "spalte");
                        currTable.appendChild(tabelleSpalte);
                        
                    }
                    numb += 1;
                }
                
            };
        }
        
        function HoppsButtonGame(Field) {

            this.Field = Field;

            this.start = function () {

                let genNumber, table, button;

                genNumber = this.rand();

                table = document.getElementsByName("spalte");

                button = document.createElement("BUTTON");
                button.style.height = "30px";
                button.innerText = "X";

                table[genNumber].appendChild(button);
            };

            this.rand = function () {

                let random, max = ((this.Field.spalten) * (this.Field.zeilen));

                random = Math.round(Math.random() * (max - 1));
                return random;

            }

        }
        
    </script>
</head>
<body>
</body>
</html>